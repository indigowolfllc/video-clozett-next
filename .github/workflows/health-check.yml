name: Health Check

on:
  schedule:
    - cron: '*/10 * * * *'   # 10ÂàÜ„Åî„Å®
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest

    steps:
      - name: Check Production URL
        run: |
          STATUS=$(curl -o /dev/null -s -w "%{http_code}" https://video-clozett-next.vercel.app)
          echo "Status: $STATUS"
          if [ "$STATUS" -ne 200 ]; then
            echo "Site is down!"
            exit 1
          fi

      - name: Notify Slack on Failure
        if: failure()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{"text":"üö® Production site is DOWN!"}' \
          ${{ secrets.SLACK_WEBHOOK_URL }}
